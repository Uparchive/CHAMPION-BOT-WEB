/* ═══════════════════════════════════════════════════════════════
   MOBILE FIX - CORREÇÃO DEFINITIVA DE RESPONSIVIDADE
   Garante que NADA escape da tela no celular
   ═══════════════════════════════════════════════════════════════ */

/* ═══════════════════════════════════════════════════════════════
   1. RESET GLOBAL - BASE PARA MOBILE
   ═══════════════════════════════════════════════════════════════ */
* {
    box-sizing: border-box !important;
}

html {
    overflow-x: hidden !important;
    width: 100% !important;
    max-width: 100vw !important;
}

body {
    overflow-x: hidden !important;
    width: 100% !important;
    max-width: 100vw !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Container principal */
.container {
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* ═══════════════════════════════════════════════════════════════
   2. MOBILE (Até 768px - Celulares e Tablets)
   ═══════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
    
    /* BODY E HTML */
    html, body {
        width: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
        position: relative !important;
    }
    
    body {
        padding: 5px !important;
        font-size: 14px !important;
    }
    
    /* CONTAINER PRINCIPAL */
    .container {
        width: 100% !important;
        max-width: 100% !important;
        padding: 5px !important;
        margin: 0 !important;
        overflow-x: hidden !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       BOT CONTAINER - INTERFACE PRINCIPAL
       ═══════════════════════════════════════════════════════ */
    .bot-container {
        width: 100% !important;
        max-width: 100vw !important;
        padding: 10px !important;
        margin: 0 !important;
        overflow-x: hidden !important;
    }
    
    /* HEADER */
    .header {
        padding: 12px 10px !important;
        flex-wrap: wrap !important;
        gap: 10px !important;
    }
    
    .header h1 {
        font-size: 18px !important;
        margin: 0 !important;
        width: 100% !important;
        text-align: center !important;
    }
    
    /* USER BADGE */
    .user-badge {
        font-size: 12px !important;
        padding: 6px 10px !important;
        width: auto !important;
        max-width: 100% !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       GRID LAYOUT - FORÇAR COLUNA ÚNICA
       ═══════════════════════════════════════════════════════ */
    .grid {
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* PAINÉIS */
    .panel {
        width: 100% !important;
        max-width: 100% !important;
        padding: 12px !important;
        margin: 0 0 12px 0 !important;
        overflow-x: hidden !important;
    }
    
    .panel h3 {
        font-size: 16px !important;
        margin-bottom: 10px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       CONTROLES - INPUTS, SELECTS, BUTTONS
       ═══════════════════════════════════════════════════════ */
    .control-group {
        width: 100% !important;
        margin-bottom: 12px !important;
    }
    
    .control-group label {
        font-size: 13px !important;
        display: block !important;
        margin-bottom: 5px !important;
        width: 100% !important;
    }
    
    /* INPUTS E SELECTS */
    input,
    select,
    textarea {
        width: 100% !important;
        max-width: 100% !important;
        padding: 10px !important;
        font-size: 14px !important;
        border-radius: 8px !important;
        margin: 0 !important;
    }
    
    /* BOTÕES */
    button,
    .btn,
    .button {
        width: 100% !important;
        max-width: 100% !important;
        padding: 12px !important;
        font-size: 15px !important;
        margin-bottom: 8px !important;
        white-space: normal !important;
        text-align: center !important;
        display: block !important;
    }
    
    /* BOTÃO TOGGLE PRINCIPAL */
    #toggleBtn {
        width: 100% !important;
        padding: 15px !important;
        font-size: 16px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       DASHBOARD - ESTATÍSTICAS E CARDS
       ═══════════════════════════════════════════════════════ */
    .stats-grid,
    .statistics {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 10px !important;
        width: 100% !important;
    }
    
    .stat-card {
        width: 100% !important;
        padding: 12px !important;
        margin: 0 !important;
    }
    
    .stat-value {
        font-size: 20px !important;
    }
    
    .stat-label {
        font-size: 12px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       LOG DE ATIVIDADES
       ═══════════════════════════════════════════════════════ */
    #activityLog {
        max-height: 250px !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        font-size: 12px !important;
        padding: 8px !important;
        width: 100% !important;
    }
    
    .log-entry {
        padding: 6px 8px !important;
        margin-bottom: 4px !important;
        font-size: 12px !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        white-space: normal !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       GRÁFICO PROFISSIONAL
       ═══════════════════════════════════════════════════════ */
    .chart-container {
        width: 100% !important;
        max-width: 100% !important;
        height: 280px !important;
        padding: 10px !important;
        overflow: hidden !important;
    }
    
    #priceChart {
        width: 100% !important;
        height: 100% !important;
    }
    
    /* INDICADORES */
    .indicators-panel {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
        padding: 10px !important;
        width: 100% !important;
    }
    
    .indicator-item {
        padding: 8px !important;
        font-size: 11px !important;
    }
    
    .indicator-value {
        font-size: 14px !important;
    }
    
    /* TOGGLE LOG/GRÁFICO */
    .view-toggle {
        display: flex !important;
        gap: 8px !important;
        margin-bottom: 10px !important;
        width: 100% !important;
    }
    
    .view-toggle button {
        flex: 1 !important;
        padding: 10px !important;
        font-size: 13px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       CONFIGURAÇÕES (MODAL)
       ═══════════════════════════════════════════════════════ */
    .modal-content {
        width: 95% !important;
        max-width: 95vw !important;
        margin: 10px auto !important;
        padding: 15px !important;
        max-height: 90vh !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
    }
    
    .modal-header h2 {
        font-size: 18px !important;
    }
    
    .close-btn {
        width: 30px !important;
        height: 30px !important;
        font-size: 24px !important;
    }
    
    /* TABS */
    .tabs {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 6px !important;
        margin-bottom: 15px !important;
        width: 100% !important;
    }
    
    .tab {
        flex: 1 !important;
        min-width: calc(50% - 3px) !important;
        padding: 10px 8px !important;
        font-size: 13px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* TAB CONTENT */
    .tab-content {
        padding: 10px !important;
        width: 100% !important;
        overflow-x: hidden !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       ESTRATÉGIAS - CATÁLOGO COM PAGINAÇÃO
       ═══════════════════════════════════════════════════════ */
    .strategy-catalog {
        width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .strategy-grid {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 10px !important;
        width: 100% !important;
        padding: 0 !important;
    }
    
    .strategy-card {
        width: 100% !important;
        max-width: 100% !important;
        padding: 12px !important;
        margin: 0 !important;
    }
    
    .strategy-header h4 {
        font-size: 15px !important;
        margin: 0 0 5px 0 !important;
    }
    
    .strategy-description {
        font-size: 12px !important;
        line-height: 1.4 !important;
    }
    
    .strategy-stats {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 6px !important;
        margin-top: 8px !important;
    }
    
    .stat-box {
        padding: 6px !important;
        font-size: 11px !important;
    }
    
    /* PAGINAÇÃO */
    .pagination-container {
        width: 100% !important;
        padding: 10px 5px !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .pagination {
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        gap: 4px !important;
        flex-wrap: wrap !important;
    }
    
    .pagination button {
        min-width: 35px !important;
        width: auto !important;
        padding: 8px 10px !important;
        font-size: 13px !important;
        margin: 2px !important;
    }
    
    .page-info {
        font-size: 12px !important;
        padding: 5px !important;
        width: 100% !important;
        text-align: center !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       FILTROS
       ═══════════════════════════════════════════════════════ */
    .filters,
    .filter-section {
        display: flex !important;
        flex-direction: column !important;
        gap: 10px !important;
        width: 100% !important;
        margin-bottom: 15px !important;
    }
    
    .filter-select,
    .search-box {
        width: 100% !important;
        padding: 10px !important;
        font-size: 14px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       TABELAS - TRANSFORMAR EM CARDS NO MOBILE
       ═══════════════════════════════════════════════════════ */
    table {
        display: block !important;
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    thead {
        display: none !important;
    }
    
    tbody {
        display: block !important;
        width: 100% !important;
    }
    
    tbody tr {
        display: block !important;
        margin-bottom: 12px !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        border-radius: 10px !important;
        padding: 10px !important;
        background: rgba(0,0,0,0.3) !important;
    }
    
    tbody td {
        display: flex !important;
        justify-content: space-between !important;
        padding: 6px 0 !important;
        border: none !important;
        font-size: 13px !important;
    }
    
    tbody td:before {
        content: attr(data-label) ": " !important;
        font-weight: bold !important;
        color: rgba(255,255,255,0.7) !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       SLIDER (STAKE)
       ═══════════════════════════════════════════════════════ */
    .slider-container {
        width: 100% !important;
        padding: 5px !important;
        overflow: hidden !important;
    }
    
    input[type="range"] {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       PIX E PAGAMENTO
       ═══════════════════════════════════════════════════════ */
    .pix-section {
        width: 100% !important;
        padding: 15px !important;
        overflow-x: hidden !important;
    }
    
    .pix-qr {
        width: 160px !important;
        height: 160px !important;
        font-size: 50px !important;
        margin: 0 auto !important;
    }
    
    .pix-code {
        font-size: 11px !important;
        padding: 8px !important;
        word-break: break-all !important;
        overflow-wrap: break-word !important;
    }
    
    .mercado-pago-button {
        width: 100% !important;
        padding: 14px !important;
        font-size: 16px !important;
        text-align: center !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       TIMER E COUNTDOWN
       ═══════════════════════════════════════════════════════ */
    .countdown {
        font-size: 20px !important;
        padding: 10px !important;
    }
    
    /* ═══════════════════════════════════════════════════════
       UTILITY CLASSES
       ═══════════════════════════════════════════════════════ */
    .text-center {
        text-align: center !important;
    }
    
    .mt-1 { margin-top: 8px !important; }
    .mt-2 { margin-top: 12px !important; }
    .mt-3 { margin-top: 16px !important; }
    
    .mb-1 { margin-bottom: 8px !important; }
    .mb-2 { margin-bottom: 12px !important; }
    .mb-3 { margin-bottom: 16px !important; }
    
    .p-1 { padding: 8px !important; }
    .p-2 { padding: 12px !important; }
    .p-3 { padding: 16px !important; }
    
    /* FORÇAR QUEBRA DE TEXTO */
    .break-word {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
        hyphens: auto !important;
    }
    
    /* ESCONDER SCROLL HORIZONTAL */
    .no-scroll-x {
        overflow-x: hidden !important;
        max-width: 100% !important;
    }
}

/* ═══════════════════════════════════════════════════════════
   3. MOBILE PEQUENO (Até 480px - iPhone SE, etc)
   ═══════════════════════════════════════════════════════════ */
@media (max-width: 480px) {
    body {
        font-size: 13px !important;
        padding: 3px !important;
    }
    
    .panel {
        padding: 10px !important;
    }
    
    .panel h3 {
        font-size: 15px !important;
    }
    
    .chart-container {
        height: 250px !important;
    }
    
    .indicators-panel {
        grid-template-columns: 1fr 1fr !important;
        gap: 6px !important;
        padding: 8px !important;
    }
    
    .indicator-item {
        padding: 6px !important;
        font-size: 10px !important;
    }
    
    .indicator-value {
        font-size: 13px !important;
    }
    
    .strategy-card {
        padding: 10px !important;
    }
    
    .pagination button {
        min-width: 32px !important;
        padding: 6px 8px !important;
        font-size: 12px !important;
    }
}

/* ═══════════════════════════════════════════════════════════
   4. LANDSCAPE MODE (Celular deitado)
   ═══════════════════════════════════════════════════════════ */
@media (max-width: 768px) and (orientation: landscape) {
    .modal-content {
        max-height: 85vh !important;
    }
    
    .chart-container {
        height: 220px !important;
    }
    
    #activityLog {
        max-height: 180px !important;
    }
}

/* ═══════════════════════════════════════════════════════════
   5. SCROLL CUSTOMIZADO (WEBKIT - CHROME/SAFARI)
   ═══════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
    ::-webkit-scrollbar {
        width: 4px !important;
        height: 4px !important;
    }
    
    ::-webkit-scrollbar-track {
        background: rgba(0,0,0,0.2) !important;
    }
    
    ::-webkit-scrollbar-thumb {
        background: rgba(138, 43, 226, 0.5) !important;
        border-radius: 2px !important;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: rgba(138, 43, 226, 0.8) !important;
    }
}
